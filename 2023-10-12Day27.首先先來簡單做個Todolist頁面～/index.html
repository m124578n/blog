<!DOCTYPE html><html class="appearance-auto" lang="ch"><head><meta charset="UTF-8"><title>Day27. 首先先來簡單做個Todolist頁面～</title><meta name="description" content="自我實現 自我成長！"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="前言快要結尾了，稍微喘口氣，來做個簡單的Todolist頁面吧！會參考以下兩篇文章進行

I built the same app 3 times | Which Python Framework is best? Django vs Flask vs FastAPI
前端框架 - 先別急著學 React

稍微以這兩個為基底下去修改和融合～
正題初始化首先先建立django project 和 app，然後把一些基礎的設定弄完再做一個簡單的hello world吧！相信大家都很熟了～

先下django-admin startproject todolist
然後進去cd todolist
接著下python manage.py startapp todoapp
再來呢修改settings.py# 在in.."><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="Shun Chih's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Shun Chih's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Day27. 首先先來簡單做個Todolist頁面～</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">返回頂部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首頁</a></h3><h3 class="is-inline-block"><a href="/about">關於我</a></h3><h3 class="is-inline-block"><a href="/archives">文章列表</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E9%A1%8C"><span class="toc-text">正題</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%96%8B%E5%A7%8B%E6%96%B0%E5%A2%9Etodo"><span class="toc-text">開始新增todo</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%90%E8%AA%9E"><span class="toc-text">結語</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/django"><i class="tag post-item-tag">django</i></a><a href="/tags/python"><i class="tag post-item-tag">python</i></a><a href="/tags/15th%E9%90%B5%E4%BA%BA%E8%B3%BD"><i class="tag post-item-tag">15th鐵人賽</i></a><a href="/tags/source%20code"><i class="tag post-item-tag">source code</i></a><a href="/tags/web%20framework"><i class="tag post-item-tag">web framework</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Day27. 首先先來簡單做個Todolist頁面～</h1><time class="has-text-grey" datetime="2023-10-12T00:51:04.000Z">2023-10-12</time><article class="mt-2 post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>快要結尾了，稍微喘口氣，來做個簡單的Todolist頁面吧！<br>會參考以下兩篇文章進行</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=3vfum74ggHE&list=PLrgX5bzJJljqMbq7msQX4nzTtV3kqZOST&index=20&ab_channel=PatrickLoeber">I built the same app 3 times | Which Python Framework is best? Django vs Flask vs FastAPI</a></li>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@Heidi-Liu/note-fe302-review">前端框架 - 先別急著學 React</a></li>
</ul>
<p>稍微以這兩個為基底下去修改和融合～</p>
<h2 id="正題"><a href="#正題" class="headerlink" title="正題"></a>正題</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>首先先建立django project 和 app，然後把一些基礎的設定弄完再做一個簡單的hello world吧！相信大家都很熟了～</p>
<ol>
<li>先下<code>django-admin startproject todolist</code></li>
<li>然後進去<code>cd todolist</code></li>
<li>接著下<code>python manage.py startapp todoapp</code></li>
<li>再來呢修改<code>settings.py</code><pre><code class="hljs py"><span class="hljs-comment"># 在installed apps裡面加上剛剛新增的app name</span>
INSTALLED_APPS = [
    <span class="hljs-string">&#x27;todoapp&#x27;</span>,
    <span class="hljs-comment"># ...</span>
]

<span class="hljs-comment"># templates 中的 dirs 加上</span>
TEMPLATES = [
    &#123;
        <span class="hljs-comment"># ...</span>
        <span class="hljs-string">&#x27;DIRS&#x27;</span> : [<span class="hljs-string">&#x27;templates&#x27;</span>],
        <span class="hljs-comment"># ...</span>
    &#125;
]</code></pre></li>
<li>建個templates資料夾備用<code>mkdir templates</code>，在裡面丟個<code>index.html</code>備用</li>
<li>在todoapp裡面新增一個<code>urls.py</code>內容如下<pre><code class="hljs py"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">&#x27;&#x27;</span>, views.index),
]</code></pre></li>
<li>todoapp裡面的<code>views.py</code>稍微加上<pre><code class="hljs py"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse

<span class="hljs-comment"># Create your views here.</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):
    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&#x27;hello&#x27;</span>: <span class="hljs-string">&#x27;world&#x27;</span>&#125;)</code></pre></li>
<li>再來在todolist的urls.py加上<pre><code class="hljs py"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path, include

urlpatterns = [
    path(<span class="hljs-string">&#x27;admin/&#x27;</span>, admin.site.urls),
    path(<span class="hljs-string">&#x27;&#x27;</span>, include(<span class="hljs-string">&#x27;todoapp.urls&#x27;</span>))
]</code></pre></li>
</ol>
<p>如此一來<code>python manage.py migrate</code> 後 <code>python manage.py runserver</code>，就能看到json格式的hello world囉～</p>
<h3 id="開始新增todo"><a href="#開始新增todo" class="headerlink" title="開始新增todo"></a>開始新增todo</h3><ol>
<li>在todoapp中的<code>models.py</code>加上<pre><code class="hljs py"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models

<span class="hljs-comment"># Create your models here.</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Todo</span>(models.Model):
    title=models.CharField(max_length=<span class="hljs-number">350</span>)
    complete=models.BooleanField(default=<span class="hljs-literal">False</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.title</code></pre></li>
<li>接著下<code>python manage.py makemigrations</code> 後 <code>python manage.py migrate</code></li>
<li>修改todoapp下的<code>views.py</code><pre><code class="hljs py"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, redirect
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse
<span class="hljs-keyword">from</span> django.views.decorators.http <span class="hljs-keyword">import</span> require_http_methods
<span class="hljs-keyword">from</span> django.forms.models <span class="hljs-keyword">import</span> model_to_dict
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Todo
<span class="hljs-keyword">import</span> json

<span class="hljs-comment"># Create your views here.</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;base.html&#x27;</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">api</span>(<span class="hljs-params">request</span>):
    todos = Todo.objects.<span class="hljs-built_in">all</span>()
    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;data&quot;</span>:<span class="hljs-built_in">list</span>(todos.values())&#125;)


<span class="hljs-meta">@require_http_methods(<span class="hljs-params">[<span class="hljs-string">&quot;POST&quot;</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">request</span>):
    body = request.body.decode(<span class="hljs-string">&quot;utf-8&quot;</span>)
    body = json.loads(body)
    title = body.get(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)
    todo = Todo(title=title)
    todo.save()
    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;todo_id&quot;</span>: todo.<span class="hljs-built_in">id</span>, <span class="hljs-string">&quot;complete&quot;</span>: todo.complete, <span class="hljs-string">&quot;todo_title&quot;</span>: todo.title&#125;)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">request, todo_id</span>):
    todo = Todo.objects.get(<span class="hljs-built_in">id</span>=todo_id)
    todo.complete = <span class="hljs-keyword">not</span> todo.complete
    todo.save()
    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;todo_id&quot;</span>: todo_id, <span class="hljs-string">&quot;complete&quot;</span>: todo.complete&#125;)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">request, todo_id</span>):
    todo = Todo.objects.get(<span class="hljs-built_in">id</span>=todo_id)
    todo.delete()
    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;todo_id&quot;</span>: todo_id&#125;)</code></pre></li>
<li>接著是todoapp下的<code>urls.py</code><pre><code class="hljs py"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">&#x27;&#x27;</span>, views.index, name=<span class="hljs-string">&quot;index&quot;</span>),
    path(<span class="hljs-string">&#x27;api/&#x27;</span>, views.api, name=<span class="hljs-string">&quot;api&quot;</span>),
    path(<span class="hljs-string">&#x27;api/add/&#x27;</span>, views.add, name=<span class="hljs-string">&quot;add&quot;</span>),
    path(<span class="hljs-string">&#x27;api/delete/&lt;int:todo_id&gt;&#x27;</span>, views.delete, name=<span class="hljs-string">&quot;delete&quot;</span>),
    path(<span class="hljs-string">&#x27;api/update/&lt;int:todo_id&gt;&#x27;</span>, views.update, name=<span class="hljs-string">&quot;update&quot;</span>),
]</code></pre></li>
<li>最後在把我們一開始新增的<code>index.html</code>修改<pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Todo App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css&quot;</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://code.jquery.com/jquery-3.7.0.js&quot;</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">&quot;sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=&quot;</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">&quot;anonymous&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;get_all_list()&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-top: 50px;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ui container&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ui center aligned header&quot;</span>&gt;</span>To Do App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ui form&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;field&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Todo Title<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input-todo&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;title&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter Todo...&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ui blue button btn-add&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> &gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todos&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">            <span class="hljs-keyword">let</span> state = &#123;</span>
<span class="language-javascript">                <span class="hljs-attr">todos</span>: []</span>
<span class="language-javascript">            &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">get_all_list</span>(<span class="hljs-params"></span>)&#123;</span>
<span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/api/&quot;</span>)</span>
<span class="language-javascript">                    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                        response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                            state = &#123;</span>
<span class="language-javascript">                                <span class="hljs-attr">todos</span>: [...state.<span class="hljs-property">todos</span>, &#123;</span>
<span class="language-javascript">                                    <span class="hljs-attr">id</span>: todo.<span class="hljs-property">id</span>,</span>
<span class="language-javascript">                                    <span class="hljs-attr">content</span>: todo.<span class="hljs-property">title</span>,</span>
<span class="language-javascript">                                    <span class="hljs-attr">isDone</span>: todo.<span class="hljs-property">complete</span></span>
<span class="language-javascript">                                &#125;]</span>
<span class="language-javascript">                            &#125;</span>
<span class="language-javascript">                        &#125;);</span>
<span class="language-javascript">                        <span class="hljs-title function_">updateState</span>(state)</span>
<span class="language-javascript">                    &#125;)</span>
<span class="language-javascript">                &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">            <span class="hljs-comment">// 更新 state</span></span>
<span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateState</span>(<span class="hljs-params">newState</span>) &#123;</span>
<span class="language-javascript">                state = newState;</span>
<span class="language-javascript">                <span class="hljs-title function_">render</span>()</span>
<span class="language-javascript">            &#125;</span>
<span class="language-javascript">            </span>
<span class="language-javascript">            <span class="hljs-comment">// state =&gt; UI</span></span>
<span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;</span>
<span class="language-javascript">                <span class="hljs-comment">// 先把畫面清空</span></span>
<span class="language-javascript">                $(<span class="hljs-string">&#x27;.todos&#x27;</span>).<span class="hljs-title function_">empty</span>();</span>
<span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">todos</span>)</span>
<span class="language-javascript">                $(<span class="hljs-string">&#x27;.todos&#x27;</span>).<span class="hljs-title function_">append</span>(</span>
<span class="language-javascript">                <span class="hljs-comment">// 把每個 todo 的 HTML 集合起來放到畫面上</span></span>
<span class="language-javascript">                state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> <span class="hljs-title class_">Todo</span>(todo)).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>)</span>
<span class="language-javascript">                );</span>
<span class="language-javascript">            &#125;</span>
<span class="language-javascript">            </span>
<span class="language-javascript">            <span class="hljs-comment">// Todo component</span></span>
<span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">Todo</span>(<span class="hljs-params">&#123;id, content, isDone&#125;</span>) &#123;</span>
<span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-string">`</span></span>
<span class="hljs-string"><span class="language-javascript">                &lt;div class=&quot;ui segment todo&quot; data-id=&quot;<span class="hljs-subst">$&#123;id&#125;</span>&quot;&gt;</span></span>
<span class="hljs-string"><span class="language-javascript">                    &lt;p class=&quot;ui big header&quot;&gt; <span class="hljs-subst">$&#123;id&#125;</span> | <span class="hljs-subst">$&#123;content&#125;</span> &lt;/p&gt;</span></span>
<span class="hljs-string"><span class="language-javascript"></span></span>
<span class="hljs-string"><span class="language-javascript">                    <span class="hljs-subst">$&#123;Span(&#123;</span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                        className: isDone ? <span class="hljs-string">&#x27;ui green label&#x27;</span> : <span class="hljs-string">&#x27;ui gray label&#x27;</span>,</span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                        content: isDone ? <span class="hljs-string">&#x27;Complete&#x27;</span> : <span class="hljs-string">&#x27;Not Completed&#x27;</span></span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                    &#125;)&#125;</span></span></span>
<span class="hljs-string"><span class="language-javascript"></span></span>
<span class="hljs-string"><span class="language-javascript">                    <span class="hljs-subst">$&#123;Button(&#123;</span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                        className: <span class="hljs-string">&#x27;blue btn-update&#x27;</span>,</span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                        content: <span class="hljs-string">&#x27;Update&#x27;</span></span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                    &#125;)&#125;</span></span></span>
<span class="hljs-string"><span class="language-javascript"></span></span>
<span class="hljs-string"><span class="language-javascript">                    <span class="hljs-subst">$&#123;Button(&#123;</span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                        className: <span class="hljs-string">&#x27;red btn-delete&#x27;</span>,</span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                        content: <span class="hljs-string">&#x27;Delete&#x27;</span></span></span></span>
<span class="hljs-subst"><span class="hljs-string"><span class="language-javascript">                    &#125;)&#125;</span></span></span>
<span class="hljs-string"><span class="language-javascript"></span></span>
<span class="hljs-string"><span class="language-javascript">                &lt;/div&gt;</span></span>
<span class="hljs-string"><span class="language-javascript">                `</span></span>
<span class="language-javascript">            &#125;</span>
<span class="language-javascript"></span>
<span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">Span</span>(<span class="hljs-params">props</span>)&#123;</span>
<span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;span class=&quot;<span class="hljs-subst">$&#123;props.className&#125;</span>&quot;&gt;<span class="hljs-subst">$&#123;props.content&#125;</span>&lt;/span&gt;`</span></span>
<span class="language-javascript">            &#125;</span>
<span class="language-javascript">            </span>
<span class="language-javascript">            <span class="hljs-comment">// Button component</span></span>
<span class="language-javascript">            <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">props</span>) &#123;</span>
<span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-string">`</span></span>
<span class="hljs-string"><span class="language-javascript">                &lt;a class=&quot;ui <span class="hljs-subst">$&#123;props.className&#125;</span> button&quot;&gt;<span class="hljs-subst">$&#123;props.content&#125;</span>&lt;/a&gt;</span></span>
<span class="hljs-string"><span class="language-javascript">                `</span></span>
<span class="language-javascript">            &#125;</span>
<span class="language-javascript">            </span>
<span class="language-javascript">            <span class="hljs-comment">// 新增 todo</span></span>
<span class="language-javascript">            $(<span class="hljs-string">&#x27;.btn-add&#x27;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-function">() =&gt;</span> &#123;</span>
<span class="language-javascript">                <span class="hljs-keyword">const</span> content = $(<span class="hljs-string">&#x27;.input-todo&#x27;</span>).<span class="hljs-title function_">val</span>();</span>
<span class="language-javascript">                <span class="hljs-keyword">if</span> (!content) <span class="hljs-keyword">return</span>;</span>
<span class="language-javascript">                $(<span class="hljs-string">&#x27;.input-todo&#x27;</span>).<span class="hljs-title function_">val</span>(<span class="hljs-string">&#x27;&#x27;</span>);</span>
<span class="language-javascript">                axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/api/add/&quot;</span>, </span>
<span class="language-javascript">                    &#123;</span>
<span class="language-javascript">                        <span class="hljs-string">&quot;title&quot;</span>: content</span>
<span class="language-javascript">                    &#125;,</span>
<span class="language-javascript">                    &#123;</span>
<span class="language-javascript">                        <span class="hljs-attr">headers</span>: &#123; </span>
<span class="language-javascript">                        <span class="hljs-string">&quot;X-CSRFToken&quot;</span>: <span class="hljs-string">&quot;&#123;&#123;csrf_token&#125;&#125;&quot;</span>,</span>
<span class="language-javascript">                        &#125;,</span>
<span class="language-javascript">                    &#125;</span>
<span class="language-javascript">                )</span>
<span class="language-javascript">                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                    todo_id = response.<span class="hljs-property">data</span>[<span class="hljs-string">&quot;todo_id&quot;</span>]</span>
<span class="language-javascript">                    title = response.<span class="hljs-property">data</span>[<span class="hljs-string">&quot;todo_title&quot;</span>]</span>
<span class="language-javascript">                    complete = response.<span class="hljs-property">data</span>[<span class="hljs-string">&quot;complete&quot;</span>]</span>
<span class="language-javascript">                    <span class="hljs-comment">// 更新 state</span></span>
<span class="language-javascript">                    <span class="hljs-title function_">updateState</span>(&#123;</span>
<span class="language-javascript">                        <span class="hljs-attr">todos</span>: [...state.<span class="hljs-property">todos</span>, &#123;</span>
<span class="language-javascript">                            <span class="hljs-attr">id</span>: todo_id,</span>
<span class="language-javascript">                            <span class="hljs-attr">content</span>: title,</span>
<span class="language-javascript">                            <span class="hljs-attr">isDone</span>: complete</span>
<span class="language-javascript">                        &#125;]</span>
<span class="language-javascript">                    &#125;);</span>
<span class="language-javascript">                &#125;)</span>
<span class="language-javascript">            &#125;);</span>
<span class="language-javascript">            </span>
<span class="language-javascript">            <span class="hljs-comment">// 刪除 todo</span></span>
<span class="language-javascript">            $(<span class="hljs-string">&#x27;.todos&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;.btn-delete&#x27;</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                <span class="hljs-keyword">const</span> id = <span class="hljs-title class_">Number</span>($(e.<span class="hljs-property">target</span>).<span class="hljs-title function_">parents</span>(<span class="hljs-string">&#x27;.todo&#x27;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;data-id&#x27;</span>));</span>
<span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/api/delete/&quot;</span>+id)</span>
<span class="language-javascript">                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                    d_id = response.<span class="hljs-property">data</span>[<span class="hljs-string">&quot;todo_id&quot;</span>]</span>
<span class="language-javascript">                    <span class="hljs-title function_">updateState</span>(&#123;</span>
<span class="language-javascript">                        <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span> = state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> !== d_id)</span>
<span class="language-javascript">                    &#125;);</span>
<span class="language-javascript">                &#125;)</span>
<span class="language-javascript">            &#125;);</span>
<span class="language-javascript">            </span>
<span class="language-javascript">            <span class="hljs-comment">// 未完成 -&gt; 已完成</span></span>
<span class="language-javascript">            $(<span class="hljs-string">&#x27;.todos&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;.btn-update&#x27;</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                <span class="hljs-keyword">const</span> id = <span class="hljs-title class_">Number</span>($(e.<span class="hljs-property">target</span>).<span class="hljs-title function_">parents</span>(<span class="hljs-string">&#x27;.todo&#x27;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;data-id&#x27;</span>));</span>
<span class="language-javascript">                axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/api/update/&quot;</span>+id)</span>
<span class="language-javascript">                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                    u_id = response.<span class="hljs-property">data</span>[<span class="hljs-string">&quot;todo_id&quot;</span>]</span>
<span class="language-javascript">                    complete = response.<span class="hljs-property">data</span>[<span class="hljs-string">&quot;complete&quot;</span>]</span>
<span class="language-javascript">                    <span class="hljs-title function_">updateState</span>(&#123;</span>
<span class="language-javascript">                        <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> &#123;</span>
<span class="language-javascript">                            <span class="hljs-keyword">if</span> (todo.<span class="hljs-property">id</span> !== u_id) <span class="hljs-keyword">return</span> todo;</span>
<span class="language-javascript">                            <span class="hljs-keyword">return</span> &#123;</span>
<span class="language-javascript">                            ...todo,</span>
<span class="language-javascript">                            <span class="hljs-attr">isDone</span>: complete</span>
<span class="language-javascript">                            &#125;</span>
<span class="language-javascript">                        &#125;)</span>
<span class="language-javascript">                    &#125;)</span>
<span class="language-javascript">                &#125;);</span>
<span class="language-javascript">            &#125;); </span>
<span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></li>
</ol>
<p>完成以上步驟後下<code>python manage.py runserver</code>就能看到簡單的ToDoList囉～</p>
<p><img src="/images/2023-10-12Day27.%E9%A6%96%E5%85%88%E5%85%88%E4%BE%86%E7%B0%A1%E5%96%AE%E5%81%9A%E5%80%8BTodolist%E9%A0%81%E9%9D%A2%EF%BD%9E/20162905rK4vgXs1dm.png"></p>
<p>那整體的介面是從上面那個youtube影片摳過來的，我自己對網頁的設計美感有點差而且CSS苦手ＸＤ<br>而JS則是透過下面那篇文章去修改的，當時想要學習React剛好看到這篇，改完就變成純JS的component和state的用法，收穫頗大！以前都是直接打API拿到Json後把html重組，現在知道了component和state後覺得JS那邊的可讀性變高很多～</p>
<h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>明天就來試試看對這個簡單的ToDoList寫些test吧！</p>
<p>完整的程式碼在這邊<br><a target="_blank" rel="noopener" href="https://github.com/m124578n/IronMan_ToDoList">https://github.com/m124578n/IronMan_ToDoList</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2023-10-13Day28.%E5%AF%AB%E4%BA%9Btest%E4%BE%86%E6%B8%AC%E8%A9%A6%E6%88%91%E5%80%91%E7%9A%84%E7%B6%B2%E9%A0%81%EF%BC%81/" title="Day28. 寫些test來測試我們的網頁！"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一頁: Day28. 寫些test來測試我們的網頁！</span></a><a class="button is-default" href="/2023-10-11Day26.render%EF%BC%8C%E7%B5%82%E6%96%BC%E8%A6%81rendercontext%E4%BA%86%EF%BC%81/" title="Day26. render，終於要render context了！"><span class="has-text-weight-semibold">下一頁: Day26. render，終於要render context了！</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="m124578n/m124578n.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/m124578n"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com/m23568n"><i class="iconfont icon-ins"></i></a><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in/john19980215"><i class="iconfont icon-linkedin"></i></a><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/m23568n"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Shun Chih 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>